"use strict";(self.webpackChunkmapml_viewer_doc=self.webpackChunkmapml_viewer_doc||[]).push([[6503],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>c});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=a.createContext({}),m=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=m(e.components);return a.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=m(n),c=o,f=d["".concat(p,".").concat(c)]||d[c]||s[c]||r;return n?a.createElement(f,l(l({ref:t},u),{},{components:n})):a.createElement(f,l({ref:t},u))}));function c(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var m=2;m<r;m++)l[m]=n[m];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5425:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>s,frontMatter:()=>r,metadata:()=>i,toc:()=>m});var a=n(7462),o=(n(7294),n(3905));const r={id:"map-feature-api",title:"HTMLFeatureElement",slug:"/api/map-feature-api"},l="HTMLFeatureElement",i={unversionedId:"api/map-feature-api",id:"api/map-feature-api",title:"HTMLFeatureElement",description:"Properties",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/api/map-feature-api.md",sourceDirName:"api",slug:"/api/map-feature-api",permalink:"/web-map-doc/fr/docs/api/map-feature-api",draft:!1,tags:[],version:"current",frontMatter:{id:"map-feature-api",title:"HTMLFeatureElement",slug:"/api/map-feature-api"},sidebar:"sidebar",previous:{title:"HTMLLayerElement",permalink:"/web-map-doc/fr/docs/api/layer-api"},next:{title:"API de projections personnalis\xe9es",permalink:"/web-map-doc/fr/docs/api/custom-projections"}},p={},m=[{value:"Properties",id:"properties",level:2},{value:"zoom",id:"zoom",level:3},{value:"min",id:"min",level:3},{value:"max",id:"max",level:3},{value:"extent",id:"extent",level:3},{value:"Methods",id:"methods",level:2},{value:"zoomTo()",id:"zoomto",level:3},{value:"click(tbd event)",id:"clicktbd-event",level:3},{value:"focus(tbd event)",id:"focustbd-event",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Options",id:"options",level:4},{value:"Notes",id:"notes",level:6},{value:"Events",id:"events",level:2},{value:"Examples",id:"examples",level:2},{value:"mapml2geojson",id:"mapml2geojson",level:3},{value:"Default options",id:"default-options",level:4}],u={toc:m};function s(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"htmlfeatureelement"},"HTMLFeatureElement"),(0,o.kt)("h2",{id:"properties"},"Properties"),(0,o.kt)("h3",{id:"zoom"},"zoom"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"HTMLFeatureElement.zoom")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"")),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"min"},"min"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"max"},"max"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"extent"},"extent"),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"methods"},"Methods"),(0,o.kt)("h3",{id:"zoomto"},"zoomTo()"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"HTMLFeatureElement.zoomTo()")," Zoom the viewport to be centred on the feature's extent.\nThe zoom / scale of the map displayed depends on the native zoom property of the feature.\nIf the feature has no specified zoom property, the extent will be 'fit' into the\nviewport at the largest integral zoom / scale possible. If a zoom property is available,\nthe viewport will be centred on the centre of the feature's extent at that zoom\nvalue."),(0,o.kt)("p",null,"For point features (which have a zero-area extent), the viewport will be centred on\nthe point location and will fit the extent of a single tile centred at that location,\nat an integral zoom / scale equal to the zoom property value, if set, or at the\nfallback (derived) zoom value if no zoom property is set. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let f = document.querySelector('map-feature');\nf.zoomTo();\n")),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"clicktbd-event"},"click(tbd event)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let f = document.querySelector('map-feature');\nf.click();\n")),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"focustbd-event"},"focus(tbd event)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let f = document.querySelector('map-feature');\nf.focus();\n\n---\n\n### blur(tbd event)\n\n```js\nlet f = document.querySelector('map-feature');\nf.blur();\n\n---\n\n### mapml2geojson(options)\n\nHTMLFeatureElement.mapml2geojson(options) returns the feature in GeoJSON format.\n\n| Function | Returns | Description |\n|----------|---------|-------------|\n| <code>mapml2geojson(<Object\\>&nbsp;options)</code> | A JavaScript (GeoJSON) feature object | This function transforms the `<feature>` element to a GeoJSON Feature object. You supply [options](#options) to control the transformation. \n\n:::caution\n\n`mapml2geojson` must be called inside a windows.onload event to work properly. i.e.\n\n``` js\nwindow.onload = (event) => {\n  let layer = document.querySelector('layer-');\n  layer.mapml2geojson();\n};\n")),(0,o.kt)("p",null,":::"),(0,o.kt)("h4",{id:"parameters"},"Parameters"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"<Object",">","\xa0","options"),(0,o.kt)("td",{parentName:"tr",align:null},"Optional. You supply parameters via an options object with ",(0,o.kt)("a",{parentName:"td",href:"#options"},"predefined option names"),".")))),(0,o.kt)("h4",{id:"options"},"Options"),(0,o.kt)("p",null,"<Object",">"," A set of key/value pairs that customize the output GeoJSON object. All are optional and detailed below."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Option"),(0,o.kt)("th",{parentName:"tr",align:null},"Type"),(0,o.kt)("th",{parentName:"tr",align:null},"Default"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"propertyFunction")),(0,o.kt)("td",{parentName:"tr",align:null},"<Function",">"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("em",{parentName:"td"},"n/a")),(0,o.kt)("td",{parentName:"tr",align:null},"A function you supply that maps the")))),(0,o.kt)("p",null,"features' ",(0,o.kt)("inlineCode",{parentName:"p"},"<map-properties>")," element to a\n",(0,o.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc7946#section-3.2"},'GeoJSON "properties" member'),",\nsince only you know the markup design in your ",(0,o.kt)("inlineCode",{parentName:"p"},"<map-properties>")," value. If you\ndon't supply this option, a default function will attempt to reverse a\n",(0,o.kt)("inlineCode",{parentName:"p"},"<table>")," child of the ",(0,o.kt)("inlineCode",{parentName:"p"},"<map-properties>")," element, as if that table was generated\nby the ",(0,o.kt)("a",{parentName:"p",href:"mapml-viewer-api#options"},"default properties option function from geojson2mapml"),". |\n| ",(0,o.kt)("inlineCode",{parentName:"p"},"transform")," | <Boolean",">"," | ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," | Transform ",(0,o.kt)("inlineCode",{parentName:"p"},"<map-coordinates>")," values to ",(0,o.kt)("inlineCode",{parentName:"p"},"gcrs")," (longitude,latitude) values, if they are not already so. GeoJSON ",(0,o.kt)("a",{parentName:"p",href:"https://www.rfc-editor.org/rfc/rfc7946.html#section-4"},"recommends")," using WGS 84 longitude,latitude coordinates, so this is the default behaviour. |"),(0,o.kt)("h6",{id:"notes"},"Notes"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"mapml2geojson"),", by default, will transform coordinates to ",(0,o.kt)("inlineCode",{parentName:"p"},"gcrs")," before serialization, if\nnecessary. Note that all geographic CRS are not equivalent, and the interpretation\nof such coordinates is not guaranteed to conform to WGS 84 / GPS coordinates,\nand therefore may not conform to ",(0,o.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc7946#section-4"},"the GeoJSON recommendation"),",\nwhich requires longitude,latitude coordinates that\nare encoded as WGS 84.  The projection engine used to implement this conversion\nis not capable of transforming coordinates from one ellipsoid to another, and\nso the resulting JSON SHOULD (somehow, tbd) be tagged with the datum in use by the projection of the layer."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"events"},"Events"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Event name"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"changestyle"),(0,o.kt)("td",{parentName:"tr",align:null},"Fired before the layer changes src due to user selecting alternate style in layer control")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"changeprojection"),(0,o.kt)("td",{parentName:"tr",align:null},"Fired before the layer changes projection due to its declared projection being not equal to that of the map")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"extentload"),(0,o.kt)("td",{parentName:"tr",align:null},"Fired when the metadata for a layer has loaded, but before loading tiles, features and other content")))),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"examples"},"Examples"),(0,o.kt)("h3",{id:"mapml2geojson"},"mapml2geojson"),(0,o.kt)("h4",{id:"default-options"},"Default options"),(0,o.kt)("p",null,"An example showcasing default GeoJSON output when no options are provided."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<layer- label="Point Geometry" checked="">\n   <map-meta name="extent" content="top-left-longitude=-75.916809, top-left-latitude=45.886964, bottom-right-longitude=-75.516809,bottom-right-latitude=45.26964"></map-meta>\n   <map-meta name="projection" content="OSMTILE"></map-meta>\n   <map-meta name="cs" content="gcrs"></map-meta>\n   <map-feature>\n      <map-featurecaption>Point Geometry</map-featurecaption>\n      <map-geometry>\n         <map-point>\n            <map-coordinates>-75.6916809 45.4186964</map-coordinates>\n         </map-point>\n      </map-geometry>\n      <map-properties>\n         <table>\n            <thead>\n               <tr>\n                  <th role="columnheader" scope="col">Property name</th>\n                  <th role="columnheader" scope="col">Property value</th>\n               </tr>\n            </thead>\n            <tbody>\n               <tr>\n                  <th scope="row">prop0</th>\n                  <td itemprop="prop0">This is a Point</td>\n               </tr>\n            </tbody>\n         </table>\n      </map-properties>\n   </map-feature>\n</layer->\n<script>\nwindow.onload = (event) => {\n   let layer = document.querySelector(\'layer-\');\n   let output = layer.mapml2geojson();\n};\n<\/script>\n')),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Click to view the output GeoJSON"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'{\n "title": "Point Geometry",\n "bbox": [-75.916809, 45.886964, -75.516809, 45.26964],\n "type": "FeatureCollection",\n "features": [{\n     "type": "Feature",\n     "geometry": {\n         "type": "Point",\n         "coordinates": [-75.6916809, 45.4186964]\n     },\n     "properties": {\n         "prop0": "This is a Point"\n     }\n }]\n}\n'))),(0,o.kt)("hr",null))}s.isMDXComponent=!0}}]);